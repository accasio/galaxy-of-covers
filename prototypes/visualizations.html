<!DOCTYPE html>
<html>
<head>
  <title>Visualizations</title>

  <link href='js/lib/sszvis.css' rel='stylesheet' />

  <script type="text/javascript" src='../node_modules/d3/d3.js'></script>
  <script type="text/javascript" src='js/lib/sszvis.js'></script>
  <script type="text/javascript" src='js/lib/jquery.min.js'></script>

  <style>
    body {
      font-family: roboto;
      margin: 0;
      padding: 0;
      padding-left: 30px;
    }
    h3 {
      margin-bottom: 0.25em;
    }
    .chart-container {
      margin-bottom: 5em;
    }
  </style>

</head>
<body>
<script>
function avg(arr, fn) {
  var len = arr.length;
  var sum = arr.reduce(function(m, v) {
    var val = fn(v)
    if (val != null) m += val;
    else len--;
    return m;
  }, 0);
  return roundPrecision(sum / len, 3);
}

function getIn(o, keys) {
  var k = keys[0],
      ks = keys.slice(1);
  if (!o || !o.hasOwnProperty(k)) return null;
  return ks.length ? getIn(o[k], ks) : o[k];
}

function inGetter(stringOfKeys) {
  var keys = stringOfKeys.split('.');
  return function(o) {
    return getIn(o, keys);
  };
}

function roundPrecision(n, p) {
  var pow10 = Math.pow(10, p)
  return Math.round(n * pow10) / pow10;
}
</script>

<h3>All songs in dataset, summary of versions</h3>
<div class='chart-container' id='chart1'></div>
<script type="text/javascript" src='js/chart1.js'></script>

<h3>Scatterplot for comparing songs</h3>
<label>Dimension 1 (x-axis):
  <select class='chart2-changeDim' id="song-dimension1"></select>
</label>
<label>Dimension 2 (y-axis):
  <select class='chart2-changeDim' id="song-dimension2"></select>
</label>
<div class='chart-container' id='chart2'></div>
<script type="text/javascript" src='js/chart2.js'></script>

<h3>Scatterplot for comparing across versions</h3>
<label>Song:
  <select class='chart3-changeSong' id="changeSong"></select>
</label>
<label>Dimension 1 (x-axis):
  <select class='chart3-changeDim' id="versions-dimension1"></select>
</label>
<label>Dimension 2 (y-axis):
  <select class='chart3-changeDim' id="versions-dimension2"></select>
</label>
<div class='chart-container' id='chart3'></div>
<script type="text/javascript" src='js/chart3.js'></script>

</body>
</html>
